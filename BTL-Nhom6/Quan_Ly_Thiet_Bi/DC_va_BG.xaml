<Window x:Class="BTL_Nhom6.Quan_Ly_Thiet_Bi.DC_va_BG"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:uc="clr-namespace:BTL_Nhom6.UserControls"
        mc:Ignorable="d"
        Title="Điều chuyển &amp; Bàn giao" 
        Height="768" Width="1366"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        ResizeMode="CanResizeWithGrip"
        FontFamily="{DynamicResource MaterialDesignFont}"
        TextElement.Foreground="{StaticResource TextPrimaryBrush}"
        TextElement.FontSize="14"
        Background="{StaticResource AppBackgroundBrush}"
        Loaded="Window_Loaded">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="270"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <uc:SidebarMenu Grid.Column="0" CurrentItem="QLTB"/>

        <Grid Grid.Column="1" Background="{StaticResource ContentBackgroundBrush}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- Row 0: Chọn TB - Vị trí cũ -->
                <RowDefinition Height="Auto"/>
                <!-- Row 1: Vị trí mới - Người cũ (MỚI) -->
                <RowDefinition Height="Auto"/>
                <!-- Row 2: Người mới (MỚI) - Ghi chú -->
                <RowDefinition Height="Auto"/>
                <!-- Row 3: Button -->
            </Grid.RowDefinitions>

            <!-- HEADER -->
            <Grid Grid.Row="0">
                <TextBlock Text="Quản lý thiết bị" 
               FontSize="24" FontWeight="Bold" Foreground="{StaticResource TextPrimaryBrush}" 
               Margin="32,24,0,10" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                <uc:WindowControlBar />
            </Grid>

            <!-- TABS -->
            <Border Grid.Row="1" BorderBrush="{StaticResource BorderLightBrush}" BorderThickness="0,0,0,1" Margin="32,0,32,24">
                <StackPanel Orientation="Horizontal">
                    <Button Content="Hồ sơ thiết bị &amp; QR" Style="{StaticResource TabButtonStyle}" Padding="0,8" Margin="0" Click="Button_HSTB_Click"/>
                    <Button Content="Tra cứu tài sản" Style="{StaticResource TabButtonStyle}" Padding="0,8" Margin="32,0,0,0" Click="Button_TraCuu_Click"/>
                    <Button Content="Theo dõi bảo hành" Style="{StaticResource TabButtonStyle}" Padding="0,8" Margin="32,0,0,0" Click="Button_BaoHanh_Click"/>
                    <Button Content="Điều chuyển &amp; Bàn giao" Style="{StaticResource ActiveTabButtonStyle}" Padding="0,8" Margin="32,0,0,0"/>
                </StackPanel>
            </Border>

            <!-- MAIN CONTENT -->
            <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="32,0,32,32">

                    <!-- FORM ĐIỀU CHUYỂN -->
                    <Border Background="White" CornerRadius="8" Padding="24" BorderBrush="{StaticResource BorderLightBrush}" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="Cập nhật vị trí thiết bị" FontSize="18" FontWeight="Bold" Margin="0,0,0,16" Foreground="{StaticResource TextPrimaryBrush}"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="40"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- 1. CHỌN THIẾT BỊ -->
                                <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,0,20">
                                    <TextBlock Text="Chọn thiết bị" FontWeight="SemiBold" Margin="0,0,0,8" Foreground="{StaticResource TextSecondaryBrush}" FontSize="13"/>
                                    <ComboBox x:Name="cbbThietBi"
                                              Style="{StaticResource MaterialDesignOutlinedComboBox}"
                                              Height="45"
                                              Padding="12,0"
                                              VerticalContentAlignment="Center"
                                              materialDesign:HintAssist.Hint="Nhập mã hoặc tên thiết bị..."
                                              materialDesign:TextFieldAssist.DecorationVisibility="Collapsed"
                                              IsEditable="True"
                                              DisplayMemberPath="DeviceName"
                                              SelectedValuePath="DeviceCode"
                                              SelectionChanged="cbbThietBi_SelectionChanged"/>
                                </StackPanel>

                                <!-- 2. VỊ TRÍ HIỆN TẠI -->
                                <StackPanel Grid.Row="0" Grid.Column="2" Margin="0,0,0,20">
                                    <TextBlock Text="Vị trí hiện tại" FontWeight="SemiBold" Margin="0,0,0,8" Foreground="{StaticResource TextSecondaryBrush}" FontSize="13"/>
                                    <TextBox x:Name="txtViTriHienTai"
                                             Text="-" 
                                             IsEnabled="False" 
                                             Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                             Height="45"
                                             Padding="12,0"
                                             VerticalContentAlignment="Center"
                                             materialDesign:TextFieldAssist.DecorationVisibility="Collapsed"/>
                                </StackPanel>

                                <!-- Vị trí mới (Bên trái) & Người phụ trách hiện tại -->
                                <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,0,20">
                                    <TextBlock Text="Chuyển đến vị trí mới" FontWeight="SemiBold" Margin="0,0,0,8" Foreground="{StaticResource TextSecondaryBrush}" FontSize="13"/>
                                    <ComboBox x:Name="cbbViTriMoi" Style="{StaticResource MaterialDesignOutlinedComboBox}" 
                                              Height="45" Padding="12,0" VerticalContentAlignment="Center"
                                              materialDesign:HintAssist.Hint="Chọn phòng ban mới..."
                                              DisplayMemberPath="LocationName" SelectedValuePath="LocationID"/>
                                </StackPanel>

                                <StackPanel Grid.Row="1" Grid.Column="2" Margin="0,0,0,20">
                                    <TextBlock Text="Người phụ trách hiện tại" FontWeight="SemiBold" Margin="0,0,0,8" Foreground="{StaticResource TextSecondaryBrush}" FontSize="13"/>
                                    <TextBox x:Name="txtNguoiHienTai" Text="-" IsEnabled="False" 
                                                Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="45" Padding="12,0" VerticalContentAlignment="Center"/>
                                </StackPanel>

                                <!-- Chọn người nhận mới  & Ghi chú  -->
                                <StackPanel Grid.Row="2" Grid.Column="0" Margin="0,0,0,20" VerticalAlignment="Top">
                                    <TextBlock Text="Bàn giao cho nhân viên (Mới)" FontWeight="SemiBold" Margin="0,0,0,8" Foreground="{StaticResource TextSecondaryBrush}" FontSize="13"/>
                                    <ComboBox x:Name="cbbNguoiMoi" Style="{StaticResource MaterialDesignOutlinedComboBox}" 
                                              Height="45" Padding="12,0" VerticalContentAlignment="Center"
                                              materialDesign:HintAssist.Hint="Chọn nhân viên nhận bàn giao..."
                                              IsEditable="True"
                                              DisplayMemberPath="FullName" SelectedValuePath="UserID"/>
                                </StackPanel>

                                <StackPanel Grid.Row="2" Grid.Column="2" Margin="0,0,0,20">
                                    <TextBlock Text="Ghi chú (Tùy chọn)" FontWeight="SemiBold" Margin="0,0,0,8" Foreground="{StaticResource TextSecondaryBrush}" FontSize="13"/>
                                    <TextBox x:Name="txtGhiChu" Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="80" 
                                                AcceptsReturn="True" TextWrapping="Wrap" VerticalContentAlignment="Top" Padding="12,10"/>
                                </StackPanel>

                                <!-- BUTTON XÁC NHẬN -->
                                <Button Grid.Row="3" Grid.Column="2" 
                                        HorizontalAlignment="Right" 
                                        Background="#3b82f6" 
                                        BorderThickness="0" 
                                        Height="45" 
                                        Padding="30,0" 
                                        materialDesign:ButtonAssist.CornerRadius="4" 
                                        Click="Button_XacNhan_Click">
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="ContentSaveEdit" Foreground="White" Width="20" Height="20" Margin="0,0,10,0" VerticalAlignment="Center"/>
                                        <TextBlock Text="LƯU THAY ĐỔI" Foreground="White" VerticalAlignment="Center" FontWeight="Bold" FontSize="13"/>
                                    </StackPanel>
                                </Button>
                            </Grid>
                        </StackPanel>
                    </Border>

                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Grid>
</Window>